{% extends 'base.html' %}

{% block side_content %}

<div class="col-md-3 side-section">
<div class="row">
  <div class="col">
    {% if ilist %}
    <h3 class="section-header">{{ wiki_ttl }}</h3>
    <p>{{ wiki_smry }}</p>
    <p>Information Provided by <a href="{{ url_for('wikipedia') }}">Wikipedia</a></p>
    {% else %}
    <h3 class="section-header">What's it all about?</h3>
    <p>
      This site allows you to create a reading list of books or comics
      you would like to read, TV shows or movies you'd like to watch,
      or games you'd like to play. You can even check off completed items to
      keep tack of your progress. Lists can be edited to add or remove items.
    </p>
    {% endif %}
  </div>
</div>
</div>

{% endblock %}

{% block content %}
<div class="col-md-9 main-section">
<div class="row">
  <div class="col-md-12">
    <h3 class="section-header">All Lists</h3>
  </div>
</div>
<div class="row">
  {% if ilist %}
  <!-- This is used to load selected list items -->
  <div class="col-md-6">
    <h4>Lists</h4>
    <table class="table table-striped">
      <thead>
        <tr>
          <th>List Name</th>
          <th>Category</th>
        </tr>
      </thead>
      <tbody>
        {% for list in lists %}
        <tr>
          <td>
            <a href="{{ url_for('home', list_id=list._id) }}">{{ list.list_name }}</a>
          </td>
          <td>{{ list.categories }}</td>
          <td>
            <div class="dropdown">
              <button type="button" name="button" data-toggle="dropdown">
                Action...
              </button>
              <div class="dropdown-menu">
                <a class="dropdown-item" href="{{ url_for('add_aitems', obj=list._id) }}">
                  Add Item
                </a>
                <a class="dropdown-item" href="{{ url_for('edit_list', list_id=list._id)}}">
                  Edit List
                </a>
                <a class="dropdown-item" href="{{ url_for('delete_list', list_id=list._id ) }}">
                  Delete List
                </a>
              </div>
            </div>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="col-md-6">
    <h4>Items</h4>
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Title</th>
          <th>Released</th>
          <th>Done</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for item in ilist %}
        <tr>
          {% for k, v in item.items() %}
          {% if k == "title" %}
          <td>
            <a href="" class="">
              {{ v }}
            </a>
          </td>
          {% elif k == "released" %}
          <td>{{ v }}</td>
          {% elif k == "completed" %}
          {% if v == "on" %}
          <td><input id="completed" name="completed" type="checkbox" checked disabled></td>
          {% else %}
          <td><input id="completed" name="completed" type="checkbox"></td>
          {% endif %}
          {% endif %}
          {% endfor %}
          {% for m, x in item.items() %}
          {% if m == "_id" %}
          <td>
            <a href="{{ url_for('delete_item', item_id=x ) }}" class="btn btn-info" role="button">
              <i class="fas fa-trash-alt" aria-hidden="true"></i>
            </a>
          </td>
          {% endif %}
          {% endfor %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <!-- This is used for the initial load of the webpage -->
  <div class="col-md-12">
    <h4>Lists</h4>
    <table class="table table-striped">
      <thead>
        <tr>
          <th>List Name</th>
          <th>Category</th>
          <th class="mobile">Created by</th>
          <th class="mobile">Last Updated</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for list in lists %}
        <tr>
          <td>{{ list.list_name }}</td>
          <td>{{ list.categories }}</td>
          <td class="mobile">{{ list.list_author }}</td>
          <td class="mobile">{{ list.created }}</td>
          <td><a href="{{ url_for('home', list_id=list._id) }}" class="btn btn-info" role="button">Show</a></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% endif %}
</div>
<div class="row bottom">
  <div class="col-md-12">
    <h4 class="section-header">Create a List</h4>
    <button type="button" name="button">
      <a href="{{ url_for('create') }}">
        <i class="fa fa-list" aria-hidden="true"></i>
        Create
      </a>
    </button>
  </div>
</div>
</div>

{% endblock %}
